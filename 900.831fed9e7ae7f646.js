"use strict";(self.webpackChunkWorkoutFormula=self.webpackChunkWorkoutFormula||[]).push([[900],{4308:(st,M,g)=>{g.d(M,{z:()=>Z});var w=g(5619),t=g(5879),E=g(9862);let Z=(()=>{var D;class m{constructor(f){this.http=f,this.baseUrl="https://shogunremakeapi.azurewebsites.net/api/exercises",this.newUrl="https://wger.de/api/v2/exercise/search/3",this._exerciseList=new w.X([]),this.exerciseList=this._exerciseList.asObservable(),this._generatedWorkout=new w.X(null),this.generatedWorkout=this._generatedWorkout.asObservable()}getExercise(f){return this.http.get(this.baseUrl+"/"+f)}getExercises(){return this.http.get(this.baseUrl).subscribe(f=>this._exerciseList.next(f),f=>console.log(f))}clearExerciseList(){this._exerciseList.next([])}}return(D=m).\u0275fac=function(f){return new(f||D)(t.LFG(E.eN))},D.\u0275prov=t.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),m})()},2931:(st,M,g)=>{g.d(M,{p:()=>D});var w=g(5619),t=g(5879),E=g(9862),Z=g(3076);let D=(()=>{var m;class N{constructor(d,c){this.http=d,this.userService=c,this._calendarWorkouts=new w.X(null),this.calendarWorkouts=this._calendarWorkouts.asObservable(),this._currentWeekWorkouts=new w.X(null),this.currentWeekWorkouts=this._currentWeekWorkouts.asObservable(),this._currentProgramHistory=new w.X(null),this.currentProgramHistory=this._currentProgramHistory.asObservable(),this.routineUrl="https://shogunremakeapi.azurewebsites.net/api/routines",this.workoutUrl="https://shogunremakeapi.azurewebsites.net/api/workouts",this._currentProgram=new w.X(null),this.currentProgram=this._currentProgram.asObservable(),this._viewProgram=new w.X(null),this.viewProgram=this._viewProgram.asObservable(),this._currentProgramGeneratedWorkouts=new w.X([]),this.currentProgramGeneratedWorkouts=this._currentProgramGeneratedWorkouts.asObservable()}createAdminProgram(d){return this.http.post(this.routineUrl,d).subscribe(c=>{this._currentProgram.next(c)},c=>{console.log("Error creating program",c)},()=>{})}saveProgramWorkout(d,c){return this.http.post(this.workoutUrl,d).subscribe(u=>{this.getProgram(c,!1)},u=>{console.log(d)})}updateJSONProgram(d,c){return console.log("Updating JSON"),this.http.put(this.routineUrl+"/"+d+"/json",c).subscribe(u=>{this._currentProgram.next(u)})}getProgram(d,c){return console.log("Getting Program"),this.http.get(this.routineUrl+"/"+d).subscribe(u=>{u.initialExercisesJSON=JSON.parse(u.initialExercisesJSON),u.multipliersJSON=JSON.parse(u.multipliersJSON),u.multipliersJSON.sort((b,C)=>b.setMultipliers.length<C.setMultipliers.length?1:b.setMultipliers.length>C.setMultipliers.length?-1:0),u.nextBlockJSON=JSON.parse(u.nextBlockJSON),u.nextMesoJSON=JSON.parse(u.nextMesoJSON),u.deloadJSON=JSON.parse(u.deloadJSON),c?this._viewProgram.next(u):this._currentProgram.next(u)})}getProgramNoSetsSegments(d){return this.http.get(this.routineUrl+"/current-program/"+d).subscribe(c=>{this._currentProgram.next(c)})}getGeneratedProgramWorkout(d,c,u){var R=this._currentProgramGeneratedWorkouts.getValue().filter(O=>O.week==c&&O.day==u)[0];return console.log("test from service",R),R}updateRoutineDetails(d,c){return this.http.put(this.routineUrl+"/details/"+c,d)}getRoutineInformation(d){return this.http.get(this.routineUrl+"/routineInfo/"+d)}setProgramsInfoJSON(d,c){this.updateProgramJSON({JSONstring:d},"whatToExpect",c)}updateProgramJSON(d,c,u){return this.http.put(this.routineUrl+"/"+u+"/"+c,d).subscribe(b=>{console.log("Updated")},b=>{console.log(b)})}getProgramsExerciseJSON(){return this._currentProgram.getValue().initialExercisesJSON}getProgramsMultipliersJSON(){return this._currentProgram.getValue().multipliersJSON}setProgramsMultipliersJSON(d){var c=this._currentProgram.getValue();c.multipliersJSON=JSON.parse(d),this._currentProgram.next(c),this.updateProgramJSON({JSONstring:d},"multipliers",c.id)}setProgramsDeloadWeekJSON(d){var c=this._currentProgram.getValue();c.deloadJSON=JSON.parse(d),this._currentProgram.next(c),this.updateProgramJSON({JSONstring:d},"deload",c.id)}setProgramsNextBlockJSON(d){var c=this._currentProgram.getValue();c.nextBlockJSON=JSON.parse(d),this._currentProgram.next(c),this.updateProgramJSON({JSONstring:d},"nextblock",c.id)}setProgramsNextMesoJSON(d){var c=this._currentProgram.getValue();c.nextMesoJSON=JSON.parse(d),this._currentProgram.next(c),this.updateProgramJSON({JSONstring:d},"nextMesocycle",c.id)}setProgramsExerciseJSON(d){var c=this._currentProgram.getValue();c.initialExercisesJSON=JSON.parse(d),this._currentProgram.next(c),this.updateProgramJSON({JSONstring:d},"exercises",c.id)}getCurrentProgram(d){return this.http.get(this.routineUrl+"/currentRoutine/"+d).subscribe(c=>{this.parseJSON(c.routine),this._calendarWorkouts.next(c.calendarWorkouts),this._currentWeekWorkouts.next(c.currentWeekWorkouts)},c=>console.log(c))}graphData(){return this._currentProgram.getValue().workouts.map((u,b)=>({index:b,workoutName:u.name,workoutWeek:u.week,workoutBlock:u.block,workoutDeload:u.deload,workoutMeso:u.meso,totalTime:u.totalTime,totalWeight:u.totalWeight,totalSets:u.totalSets,totalReps:u.totalReps}))}parseJSON(d){try{d.initialExercisesJSON&&(d.initialExercisesJSON=JSON.parse(d.initialExercisesJSON)),d.multipliersJSON&&(d.multipliersJSON=JSON.parse(d.multipliersJSON),d.multipliersJSON.sort((c,u)=>c.setMultipliers.length<u.setMultipliers.length?1:c.setMultipliers.length>u.setMultipliers.length?-1:0)),d.programCompletionJSON&&(d.programCompletionJSON=JSON.parse(d.programCompletionJSON)),d.programOverviewJSON&&(d.programOverviewJSON=JSON.parse(d.programOverviewJSON)),d.nextBlockJSON&&(d.nextBlockJSON=JSON.parse(d.nextBlockJSON)),d.nextMesoJSON&&(d.nextMesoJSON=JSON.parse(d.nextMesoJSON)),d.deloadJSON&&(d.deloadJSON=JSON.parse(d.deloadJSON)),d.whatToExpectJSON&&(d.whatToExpectJSON=JSON.parse(d.whatToExpectJSON)),d.workouts.forEach(c=>{c.workoutOverviewJSON&&(c.workoutOverviewJSON=JSON.parse(c.workoutOverviewJSON))})}catch(c){console.error("eror",c)}this._currentProgram.next(d)}getProgramHistory(d){return console.log("Getting Program History"),this.http.get(this.routineUrl+"/"+d).subscribe(c=>{try{c.initialExercisesJSON&&(c.initialExercisesJSON=JSON.parse(c.initialExercisesJSON)),c.multipliersJSON&&(c.multipliersJSON=JSON.parse(c.multipliersJSON),c.multipliersJSON.sort((u,b)=>u.setMultipliers.length<b.setMultipliers.length?1:u.setMultipliers.length>b.setMultipliers.length?-1:0)),c.programCompletionJSON&&(c.programCompletionJSON=JSON.parse(c.programCompletionJSON)),c.programOverviewJSON&&(c.programOverviewJSON=JSON.parse(c.programOverviewJSON)),c.nextBlockJSON&&(c.nextBlockJSON=JSON.parse(c.nextBlockJSON)),c.nextMesoJSON&&(c.nextMesoJSON=JSON.parse(c.nextMesoJSON)),c.deloadJSON&&(c.deloadJSON=JSON.parse(c.deloadJSON)),c.whatToExpectJSON&&(c.whatToExpectJSON=JSON.parse(c.whatToExpectJSON)),c.workouts.forEach(u=>{u.workoutOverviewJSON&&(u.workoutOverviewJSON=JSON.parse(u.workoutOverviewJSON))})}catch(u){console.error("eror",u)}this._currentProgramHistory.next(c)})}updateFinalProgram(d,c,u,b){return this.http.put(this.routineUrl+"/finished/"+c,d).subscribe(C=>{console.log("Program Updated",C),this.updateUserSettingsRoutineId(null,u,0,0,b),this._currentProgram.next(null)},C=>{console.log("Error from update program",C)})}updateUserSettingsRoutineId(d,c,u,b,C){var R={routineId:"",stillCreatingRoutine:"",totalWorkouts:"",completedWorkouts:""};return R.routineId=d,R.stillCreatingRoutine=c,R.totalWorkouts=u,R.completedWorkouts=b,this.http.put("https://shogunremakeapi.azurewebsites.net/api/userprofile/"+C,R).subscribe(O=>{this.userService.newUser(O)},O=>{console.log(O)},()=>{})}deleteCurrentProgram(d,c,u,b){return this.http.delete(this.routineUrl+"/"+d).subscribe(C=>{console.log("Program Deleted",C),b&&this._currentProgram.next(null),this.updateUserSettingsRoutineId(null,c,0,0,u)},C=>{console.log("Error delete program",C)},()=>{})}getCurrentProgramBaseWorkouts(d,c,u){return this.http.get(this.workoutUrl+"/current-program/"+d+"/"+c+"/"+u)}getCurrentProgramWeeksWorkouts(d,c,u){return this.http.get(this.workoutUrl+"/current-program/current-week/"+d+"/"+c+"/"+u)}getCurrentProgramMesoWeeksWorkouts(d,c,u,b){return this.http.get(this.workoutUrl+"/current-program/deload/"+d+"/"+c+"/"+u+"/"+b)}getCurrentProgramCurrentMesoBaseWorkouts(d,c,u,b){return this.http.get(this.workoutUrl+"/current-program/"+d+"/"+c+"/"+u+"/"+b)}postNewRoutineWorkoutsArray(d){return this.http.post(this.workoutUrl+"/list",d)}updateRoutineBlock(d,c){return this.http.put(this.routineUrl+"/next-routine-block/"+d,c).subscribe(u=>{this.getProgramNoSetsSegments(d)})}updateRoutineMeso(d,c){return this.http.put(this.routineUrl+"/next-routine-meso/"+d,c).subscribe(u=>{this.getProgramNoSetsSegments(d)})}}return(m=N).\u0275fac=function(d){return new(d||m)(t.LFG(E.eN),t.LFG(Z.K))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),N})()},3900:(st,M,g)=>{g.r(M),g.d(M,{WorkoutModule:()=>Ge});var w=g(95),t=g(5879),E=g(6814);function j(r,s,o){const e=L(s,r.length-1),i=L(o,r.length-1);if(e===i)return;const n=r[e],a=i<e?-1:1;for(let l=e;l!==i;l+=a)r[l]=r[l+a];r[i]=n}function L(r,s){return Math.max(0,Math.min(s,r))}g(5541),g(2831),g(2495),g(7849),g(8645),g(7394),g(6321),g(4825),g(927),g(5592),g(3019),g(9773),g(7398),g(8180),g(7921),g(9397),g(4664),g(9388);var Ct=g(4308),P=g(7700);let Xt=(()=>{var r;class s{transform(e,i){return e&&e.length?i?e.filter(n=>n.name.toLowerCase().indexOf(i)>=0):e:[]}}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"filter",type:r,pure:!0}),s})();function te(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){const n=t.CHM(o).$implicit,a=t.oxw(2);return t.KtG(a.goToBodyPart(n))}),t.TgZ(1,"div",16)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"div",17),t._uU(5," > "),t.qZA()()}if(2&r){const o=s.$implicit;t.xp6(3),t.Oqu(o)}}function ee(r,s){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,te,6,1,"div",14),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.bodyPartsGrid)}}function ie(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){const n=t.CHM(o).$implicit,a=t.oxw(2);return t.KtG(a.goToTypes(n))}),t.TgZ(1,"div",16)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"div",17),t._uU(5," > "),t.qZA()()}if(2&r){const o=s.$implicit;t.xp6(3),t.Oqu(o)}}function se(r,s){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,ie,6,1,"div",14),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.typesGrid)}}function oe(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){const i=t.CHM(o),n=i.index,a=i.$implicit,l=t.oxw(2);return t.KtG(l.onHandleInput(n,a.name))}),t.TgZ(1,"div",16)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"div",17),t._uU(5," > "),t.qZA()()}if(2&r){const o=s.$implicit;t.xp6(3),t.Oqu(o.name)}}function re(r,s){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,oe,6,1,"div",14),t.ALo(2,"filter"),t.qZA()),2&r){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,o.exercises,o.searchInput))}}function ne(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",21),t.NdJ("click",function(){const i=t.CHM(o),n=i.index,a=i.$implicit,l=t.oxw(2);return t.KtG(l.onHandleInput(n,a.name))}),t.TgZ(1,"div",16)(2,"label"),t._uU(3),t.qZA()(),t.TgZ(4,"div",17),t._uU(5," > "),t.qZA()()}if(2&r){const o=s.$implicit;t.xp6(3),t.Oqu(o.name)}}function ae(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",17)(2,"button",18),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.backToSelectExercise())}),t._uU(3,"Back"),t.qZA()(),t.TgZ(4,"div",19)(5,"label"),t._uU(6),t.qZA()(),t.YNc(7,ne,6,1,"div",20),t.ALo(8,"filter"),t.qZA()}if(2&r){const o=t.oxw();t.xp6(6),t.Oqu(o.searchedBodyPart),t.xp6(1),t.Q6J("ngForOf",t.xi3(8,2,o.bodyPartExercises,o.searchInput))}}function le(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"input",22),t.NdJ("ngModelChange",function(i){t.CHM(o);const n=t.oxw();return t.KtG(n.addExerciseName=i)}),t.qZA()(),t.TgZ(3,"div",23)(4,"button",10),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.addExercise(i.addExerciseName))}),t._uU(5,"Add"),t.qZA()()()}if(2&r){const o=t.oxw();t.xp6(2),t.Q6J("ngModel",o.addExerciseName)}}function ce(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",2)(2,"button",10),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.showAddMultipleExercise())}),t._uU(3,"Add Multiple Exercises"),t.qZA()()()}}function de(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",6)(1,"div",2)(2,"label",24),t._uU(3,"Your Exercises - Hold To Reorder"),t.qZA()(),t._UZ(4,"div",2),t.TgZ(5,"div",2)(6,"button",10),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.finish())}),t._uU(7,"Add Your Exercises"),t.qZA()()()}}let Tt=(()=>{var r;class s{constructor(e,i){this.exerciseService=e,this.dialogRef=i,this.bodyParts=!0,this.types=!1,this.list=!1,this.typesGrid=["Barbell","BodyWeight","Dumbbell","Bands","Machine"],this.bodyPartsGrid=["Abs","Back","Arms","Chest","Legs","Shoulders"],this.typeExercises=[],this.bodyPartExercises=[],this.isMultipleExercises=!1,this.selectedExercises=[],this.superSetExercises=[],this.isSuperSet=!1,this.addExerciseTextBox=!1,this.showAddMultipleExercises=!1}ngOnInit(){this.exerciseSub=this.exerciseService.exerciseList.subscribe(e=>{e.sort((i,n)=>i.bodyPart>n.bodyPart?1:-1),e.forEach(function(i){i.selected=!1}),this.exercises=e,this.exerciseStore=e},e=>console.log(e))}drop(e){j(this.selectedExercises,e.previousIndex,e.currentIndex)}onClear(){this.exercises=this.exerciseStore,this.searchInput="",this.bodyParts=!0,this.types=!1,this.list=!1}backToSelectExercise(){this.bodyPartExercises=[],this.searchedBodyPart=null,this.searchInput=""}showBodyParts(){this.bodyParts=!0,this.types=!1,this.list=!1}showTypes(){this.bodyParts=!1,this.types=!0,this.list=!1}showList(){this.bodyParts=!1,this.types=!1,this.list=!0}goToTypes(e){this.bodyPartExercises=[],this.searchedBodyPart=e,this.exercises.forEach(i=>{i.type==e&&this.bodyPartExercises.push(i)}),this.bodyPartExercises.sort((i,n)=>i.name>n.name?1:-1)}goToBodyPart(e){this.bodyPartExercises=[],this.searchedBodyPart=e,this.exercises.forEach(i=>{i.bodyPart==e&&this.bodyPartExercises.push(i)}),this.bodyPartExercises.sort((i,n)=>i.name>n.name?1:-1)}addExercise(e){console.log(e),this.selectedExercises.push({id:0,name:e}),!this.showAddMultipleExercises&&this.finish()}showAddExercise(){this.addExerciseTextBox=!this.addExerciseTextBox}showAddMultipleExercise(){this.isMultipleExercises=!0,this.isSuperSet=!1}onDeleteMultipleExercises(e){this.selectedExercises.splice(e,1)}addMultipleExercises(){this.finish()}ngOnDestroy(){this.exerciseSub.unsubscribe(),console.log("Exercise List Modal UnSub")}superSet(){this.isSuperSet=!this.isSuperSet}sortExercises(){this.exercises.sort((e,i)=>e.name>i.name?1:-1)}onHandleInput(e,i){let n=this.exercises.find(a=>a.name===i);this.isSuperSet&&this.superSetExercises.push(n),this.isMultipleExercises?this.selectedExercises.push(n):!this.isMultipleExercises&&!this.isSuperSet&&(this.selectedExercises.push(n),this.finish()),n=null,this.searchedBodyPart=null,this.bodyPartExercises=[]}finish(){let n=this.selectedExercises;this.isSuperSet&&(n=this.superSetExercises),this.dialogRef.close({event:"close",data:void 0,action:n}),console.log(n)}}return(r=s).\u0275fac=function(e){return new(e||r)(t.Y36(Ct.z),t.Y36(P.so))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-exercise-list-modal"]],decls:36,vars:9,consts:[[2,"padding","10px"],[1,"row"],[1,"col-sm-12"],["mat-button","",1,"button",3,"mat-dialog-close"],[1,"col-sm-12","d-flex","align-items-center","justify-content-center"],[1,"h2"],[1,"row","mt-3"],[1,"col-sm-8"],["type","text","name","search","autocomplete","off","placeholder","Search Exercises",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4","d-flex","align-items-center","justify-content-center"],[1,"button",3,"click"],[1,"btn",3,"click"],[4,"ngIf"],["class","row mt-3",4,"ngIf"],["class","row",3,"click",4,"ngFor","ngForOf"],[1,"row",3,"click"],[1,"col-sm-10"],[1,"col-sm-2"],[3,"click"],[1,"col-sm-10","d-flex","align-items-center","justify-content-center"],["class","row mt=3",3,"click",4,"ngFor","ngForOf"],[1,"row","mt=3",3,"click"],["type","text","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-4"],[1,"h3"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),t._uU(4,"Close"),t.qZA()()(),t.TgZ(5,"div",1)(6,"div",4)(7,"label",5),t._uU(8,"Choose Exercise"),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"input",8),t.NdJ("ngModelChange",function(a){return i.searchInput=a}),t.qZA()(),t.TgZ(12,"div",9)(13,"button",10),t.NdJ("click",function(){return i.onClear()}),t._uU(14,"Cancel"),t.qZA()()(),t.TgZ(15,"div",6)(16,"div",9)(17,"button",11),t.NdJ("click",function(){return i.showBodyParts()}),t._uU(18,"Body Parts"),t.qZA()(),t.TgZ(19,"div",9)(20,"button",11),t.NdJ("click",function(){return i.showTypes()}),t._uU(21,"Type"),t.qZA()(),t.TgZ(22,"div",9)(23,"button",11),t.NdJ("click",function(){return i.showList()}),t._uU(24,"List"),t.qZA()()(),t.YNc(25,ee,2,1,"div",12),t.YNc(26,se,2,1,"div",12),t.YNc(27,re,3,4,"div",12),t.YNc(28,ae,9,5,"div",13),t.TgZ(29,"div",6)(30,"div",2)(31,"button",10),t.NdJ("click",function(){return i.showAddExercise()}),t._uU(32,"Add Your Own Exercise"),t.qZA()()(),t.YNc(33,le,6,1,"div",13),t.YNc(34,ce,4,0,"div",13),t.YNc(35,de,8,0,"div",13),t.qZA()),2&e&&(t.xp6(3),t.Q6J("mat-dialog-close",!1),t.xp6(8),t.Q6J("ngModel",i.searchInput),t.xp6(14),t.Q6J("ngIf",i.bodyParts),t.xp6(1),t.Q6J("ngIf",i.types),t.xp6(1),t.Q6J("ngIf",i.list),t.xp6(1),t.Q6J("ngIf",i.searchedBodyPart),t.xp6(5),t.Q6J("ngIf",i.addExerciseTextBox),t.xp6(1),t.Q6J("ngIf",!i.isMultipleExercises),t.xp6(1),t.Q6J("ngIf",i.isMultipleExercises))},dependencies:[E.sg,E.O5,w.Fj,w.JJ,w.On,P.ZT,Xt],styles:[".active[_ngcontent-%COMP%]{border-left:5px solid #0682f7}.active-btn[_ngcontent-%COMP%]{background-color:#adff2f}.not-active-btn[_ngcontent-%COMP%]{color:#fff;background-color:#0682f7}.not-active[_ngcontent-%COMP%]{background-color:#fff}"]}),s})(),Et=(()=>{var r;class s{constructor(e){this.data=e}}return(r=s).\u0275fac=function(e){return new(e||r)(t.Y36(P.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-finished-workout-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._uU(3,"Have you finished your workout?"),t.qZA(),t.TgZ(4,"mat-dialog-actions")(5,"button",1),t._uU(6,"No"),t.qZA(),t.TgZ(7,"button",1),t._uU(8,"Yes"),t.qZA()()),2&e&&(t.xp6(1),t.hij("",i.data.title," Workout"),t.xp6(4),t.Q6J("mat-dialog-close",!1),t.xp6(2),t.Q6J("mat-dialog-close",!0))},dependencies:[P.ZT,P.uh,P.xY,P.H8],encapsulation:2}),s})(),he=(()=>{var r;class s{}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-mark-exercise-complete-modal"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Mark All Exercies As Completed?"),t.qZA(),t.TgZ(2,"mat-dialog-content"),t._uU(3,"You haven't marked any exercises as completed, do you want to mark then all as completed?"),t.qZA(),t.TgZ(4,"mat-dialog-actions")(5,"button",1),t._uU(6,"No"),t.qZA(),t.TgZ(7,"button",1),t._uU(8,"Yes"),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(2),t.Q6J("mat-dialog-close",!0))},dependencies:[P.ZT,P.uh,P.xY,P.H8],encapsulation:2}),s})(),ue=(()=>{var r;class s{constructor(e){this.dialogRef=e}ngOnInit(){}onHandleInput(e){this.dialogRef.close({event:"close",data:void 0,action:e})}}return(r=s).\u0275fac=function(e){return new(e||r)(t.Y36(P.so))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-set-options-modal"]],decls:25,vars:0,consts:[[2,"padding","20px"],[1,"row","mt-2"],[1,"col-sm-12"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return i.onHandleInput("1")}),t._uU(4,"Set Reps To AMRAP"),t.qZA()()(),t.TgZ(5,"div",1)(6,"div",2)(7,"button",3),t.NdJ("click",function(){return i.onHandleInput("5")}),t._uU(8,"Set Reps To Failure"),t.qZA()()(),t.TgZ(9,"div",1)(10,"div",2)(11,"button",3),t.NdJ("click",function(){return i.onHandleInput("2")}),t._uU(12,"Set Weight To BodyWeight"),t.qZA()()(),t.TgZ(13,"div",1)(14,"div",2)(15,"button",3),t.NdJ("click",function(){return i.onHandleInput("3")}),t._uU(16,"Insert Set Above"),t.qZA()()(),t.TgZ(17,"div",1)(18,"div",2)(19,"button",3),t.NdJ("click",function(){return i.onHandleInput("4")}),t._uU(20,"Insert Set Below"),t.qZA()()(),t.TgZ(21,"div",1)(22,"div",2)(23,"button",3),t.NdJ("click",function(){return i.onHandleInput("6")}),t._uU(24,"Show Previous Workout"),t.qZA()()()())},encapsulation:2}),s})(),Rt=(()=>{var r;class s{constructor(){this.setTypesArr=[{value:"Add New",viewValue:"Add New"},{value:"Top/Back Off Set",viewValue:"Top/Back Off Set"},{value:"Preset",viewValue:"Preset"},{value:"Warm Up",viewValue:"Warm Up"},{value:"Working Set",viewValue:"Working Set"},{value:"Pump",viewValue:"Pump"},{value:"Drop Set",viewValue:"Drop Set"},{value:"AMRAP",viewValue:"AMRAP"},{value:"Failure",viewValue:"Failure"},{value:"1RM",viewValue:"1RM"},{value:"1RM Secondary",viewValue:"1RM Secondary"},{value:"RPE",viewValue:"RPE"},{value:"FST7",viewValue:"FST7"},{value:"Timed",viewValue:"Timed"},{value:"Superset",viewValue:"Superset"},{value:"Rest Pause",viewValue:"Rest Pause"},{value:"Bodyweight",viewValue:"Bodyweight"},{value:"Primary",viewValue:"Primary"},{value:"Secondary",viewValue:"Secondary"}]}getSetTypes(){return this.setTypesArr}getSetTypesValue(){let e=[];return this.setTypesArr.forEach(i=>e.push(i.value)),e}}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),s})();function pe(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"button",3),t.NdJ("click",function(){const n=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.onHandleInput(n.value))}),t._uU(3),t.qZA()()()}if(2&r){const o=s.$implicit;t.xp6(3),t.Oqu(o.viewValue)}}let ge=(()=>{var r;class s{constructor(e,i){this.setTypesService=e,this.dialogRef=i}ngOnInit(){this.setTypes=this.setTypesService.getSetTypes()}onHandleInput(e){this.dialogRef.close({event:"close",data:void 0,type:e})}}return(r=s).\u0275fac=function(e){return new(e||r)(t.Y36(Rt),t.Y36(P.so))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-set-types-modal"]],features:[t._Bn([Rt])],decls:1,vars:1,consts:[["class","row",4,"ngFor","ngForOf"],[1,"row"],[1,"col-sm-12"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){1&e&&t.YNc(0,pe,4,1,"div",0),2&e&&t.Q6J("ngForOf",i.setTypes)},dependencies:[E.sg],encapsulation:2}),s})(),_e=(()=>{var r;class s{}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-top-set-modal"]],decls:2,vars:0,template:function(e,i){1&e&&(t.TgZ(0,"p"),t._uU(1,"top-set-modal works!"),t.qZA())}}),s})(),me=(()=>{var r;class s{}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-workout-name-modal"]],decls:5,vars:0,consts:[["mat-dialog-title",""],["mat-button","","mat-dialog-close",""]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Add a name to your workout"),t.qZA(),t.TgZ(2,"mat-dialog-actions")(3,"button",1),t._uU(4,"Ok"),t.qZA()())},dependencies:[P.ZT,P.uh,P.H8],encapsulation:2}),s})(),fe=(()=>{var r;class s{}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-workout-options-modal"]],decls:9,vars:1,consts:[["mat-dialog-title",""],[1,"row"],["mat-button","","mat-dialog-close","reorder",1,"button"],["mat-button","","mat-dialog-close","complete",1,"button"],["mat-button","",1,"button",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Workout Options"),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t._uU(4,"Reorder Exercises"),t.qZA(),t.TgZ(5,"button",3),t._uU(6,"Mark All Exercises Complete"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Close"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))},dependencies:[P.ZT,P.uh],encapsulation:2}),s})(),ve=(()=>{var r;class s{constructor(e,i){this.dialogRef=e,this.data=i}ngOnInit(){console.log(this.data.exercises)}drop(e){j(this.data.exercises,e.previousIndex,e.currentIndex)}onSave(){this.dialogRef.close({event:"close",data:this.data.exercises})}}return(r=s).\u0275fac=function(e){return new(e||r)(t.Y36(P.so),t.Y36(P.WI))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-reorder-exericses-modal"]],decls:0,vars:0,template:function(e,i){},encapsulation:2}),s})();var xe=g(9862),Ot=g(3076);let Se=(()=>{var r;class s{constructor(e,i){this.http=e,this.userService=i,this.baseUrl="https://shogunremakeapi.azurewebsites.net/api/workouts"}onCreate(e){return this.http.post(this.baseUrl,e)}onUpdate(e,i){return this.http.put(this.baseUrl+"/"+i,e)}getWorkout(e){return this.http.get(this.baseUrl+"/"+e)}getWorkoutsByType(e){var i;return i=e.replace(/ /g,"").toLowerCase(),this.http.get(this.baseUrl+"/bytype/"+i)}updateUserSettingsProgressBar(e,i,n){var a={completedWorkouts:"",totalWorkouts:""};return a.completedWorkouts=e,a.totalWorkouts=i,this.http.put("https://shogunremakeapi.azurewebsites.net/api/userprofile/progress/"+n,a).subscribe(l=>{this.userService.newUser(l)},l=>{console.log(l)},()=>{})}}return(r=s).\u0275fac=function(e){return new(e||r)(t.LFG(xe.eN),t.LFG(Ot.K))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),s})();var we=g(2931),q=g(157);function be(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.preChecks())}),t._uU(1,"Finish Workout"),t.qZA()}}function Pe(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.preChecks())}),t._uU(1,"Save Workout"),t.qZA()}}function ke(r,s){1&r&&t._UZ(0,"div",4)}function ye(r,s){1&r&&(t.TgZ(0,"div")(1,"div")(2,"label"),t._uU(3,"Week:"),t.qZA(),t._UZ(4,"input",16),t.qZA(),t.TgZ(5,"div")(6,"label"),t._uU(7,"Day:"),t.qZA(),t._UZ(8,"input",17),t.qZA()())}function De(r,s){if(1&r&&(t.TgZ(0,"div",4)(1,"label",36),t._uU(2),t.qZA()()),2&r){const o=t.oxw().index,e=t.MAs(2);t.xp6(2),t.AsE("Exercise ",o+1,": ",e.value,"")}}function Ce(r,s){if(1&r&&(t.TgZ(0,"div",27)(1,"Label",37),t._uU(2),t.qZA()(),t.TgZ(3,"div",38)(4,"label",37),t._uU(5),t.qZA()()),2&r){const o=t.oxw().index,e=t.MAs(5),i=t.MAs(2);t.xp6(2),t.hij("Superset ",e.value,""),t.xp6(3),t.AsE("Exercise ",o+1,": ",i.value,"")}}function Te(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",7)(1,"div",2)(2,"label",39),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,n=t.oxw();return t.KtG(n.addTimer(i))}),t._uU(3," Add Timer"),t.qZA()()()}}function Ee(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",7)(1,"div",2)(2,"label",39),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,n=t.oxw();return t.KtG(n.addTimer(i))}),t._uU(3),t.qZA()()()}if(2&r){const o=t.oxw().$implicit;t.xp6(3),t.hij("",o.get("timer").value," Seconds Rest (Click To Enter Timer)")}}function Re(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",53),t.qZA())}function Oe(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",54),t.qZA())}function Ie(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",55),t.qZA())}function Ne(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",56),t.qZA())}function Me(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"label",39),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,n=t.oxw().index,a=t.oxw();return t.KtG(a.addType(n,i))}),t._uU(1,"Add Type"),t.qZA()}}function Ze(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"label",39),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().index,n=t.oxw().index,a=t.oxw();return t.KtG(a.addType(n,i))}),t._uU(1),t.qZA()}if(2&r){t.oxw();const o=t.MAs(14);t.xp6(1),t.Oqu(o.value)}}function Ae(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",57),t.qZA())}function Je(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",57),t.qZA())}function We(r,s){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",58),t.qZA())}function Le(r,s){1&r&&t._UZ(0,"div",1)}function Fe(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"input",40),t.TgZ(2,"div",7)(3,"div",33)(4,"label",34),t._uU(5),t.qZA()(),t.YNc(6,Re,2,0,"div",41),t.YNc(7,Oe,2,0,"ng-template",null,42,t.W1O),t.YNc(9,Ie,2,0,"div",41),t.YNc(10,Ne,2,0,"ng-template",null,43,t.W1O),t.TgZ(12,"div",27),t._UZ(13,"input",44,45),t.YNc(15,Me,2,0,"label",46),t.YNc(16,Ze,2,1,"label",46),t.qZA(),t.YNc(17,Ae,2,0,"div",47),t.YNc(18,Je,2,0,"div",47),t.YNc(19,We,2,0,"div",47),t.TgZ(20,"div",33)(21,"div",48),t._UZ(22,"input",49),t.qZA()(),t.TgZ(23,"div",33)(24,"i",50),t.NdJ("click",function(){const n=t.CHM(o).index,a=t.oxw().index,l=t.oxw();return t.KtG(l.setOptions(a,n))}),t.qZA()(),t.TgZ(25,"div",33)(26,"i",51),t.NdJ("click",function(){const n=t.CHM(o).index,a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.deleteSet(a.controls.sets,n))}),t.qZA()()(),t.YNc(27,Le,1,0,"div",52),t.qZA()}if(2&r){const o=s.$implicit,e=s.index,i=t.MAs(8),n=t.MAs(11),a=t.MAs(14),l=t.oxw(2);t.Q6J("formGroupName",e),t.xp6(1),t.Q6J("ngModel",e+1),t.xp6(4),t.Oqu(e+1),t.xp6(1),t.Q6J("ngIf","AMRAP"===o.get("reps").value||"Failure")("ngIfElse",i),t.xp6(3),t.Q6J("ngIf","Bodyweight"===o.get("weight").value)("ngIfElse",n),t.xp6(6),t.Q6J("ngIf",!a.value),t.xp6(1),t.Q6J("ngIf",a.value),t.xp6(1),t.Q6J("ngIf","1RM"===o.get("type").value),t.xp6(1),t.Q6J("ngIf","1RM Secondary"===o.get("type").value),t.xp6(1),t.Q6J("ngIf","RPE"===o.get("type").value),t.xp6(8),t.Q6J("ngIf",!l.fromProgram&&"1RM"===o.get("type").value||"1RM Secondary")}}function Ue(r,s){if(1&r){const o=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"input",19,20)(3,"input",21)(4,"input",22,23)(6,"input",24),t.TgZ(7,"div",7),t.YNc(8,De,3,2,"div",25),t.YNc(9,Ce,6,3,"ng-template",null,26,t.W1O),t.TgZ(11,"div",27)(12,"i",28),t.NdJ("click",function(){const n=t.CHM(o).index,a=t.oxw();return t.KtG(a.deleteSegment(n))}),t.qZA()(),t.TgZ(13,"div",27)(14,"i",29),t.NdJ("click",function(){const n=t.CHM(o).index,a=t.oxw();return t.KtG(a.changeExercise(n))}),t.qZA()(),t.TgZ(15,"div",27)(16,"i",30),t.NdJ("click",function(){const n=t.CHM(o).index,a=t.oxw();return t.KtG(a.exerciseOptions(n))}),t.qZA()()(),t.TgZ(17,"div",7)(18,"div",2),t._UZ(19,"textarea",31),t.qZA()(),t.YNc(20,Te,4,0,"div",32),t.YNc(21,Ee,4,1,"div",32),t.TgZ(22,"div",7)(23,"div",33)(24,"label",34),t._uU(25,"Set"),t.qZA()(),t.TgZ(26,"div",27)(27,"label",34),t._uU(28,"Reps"),t.qZA()(),t.TgZ(29,"div",27)(30,"label",34),t._uU(31,"Kg"),t.qZA()(),t.TgZ(32,"div",27)(33,"label",34),t._uU(34,"Type"),t.qZA()(),t.TgZ(35,"div",33),t._UZ(36,"label",34),t.qZA(),t.TgZ(37,"div",33),t._UZ(38,"label",34),t.qZA(),t.TgZ(39,"div",33),t._UZ(40,"label",34),t.qZA()(),t.TgZ(41,"div",35),t.YNc(42,Fe,28,13,"div",13),t.qZA(),t.TgZ(43,"div",7)(44,"div",2)(45,"button",14),t.NdJ("click",function(){const n=t.CHM(o).$implicit,a=t.oxw();return t.KtG(a.addNewSet(n.controls.sets))}),t._uU(46,"Add Set"),t.qZA()()()()}if(2&r){const o=s.$implicit,e=s.index,i=t.MAs(10);t.Q6J("formGroupName",e),t.xp6(6),t.Q6J("ngModel",e+1),t.xp6(2),t.Q6J("ngIf",0==o.get("superSet").value)("ngIfElse",i),t.xp6(12),t.Q6J("ngIf",!o.get("timer").value),t.xp6(1),t.Q6J("ngIf",o.get("timer").value),t.xp6(21),t.Q6J("ngForOf",o.get("sets").controls)}}let Be=(()=>{var r;class s{constructor(e,i,n,a,l,h,p,_,S){this.exerciseService=e,this.workoutService=i,this.routineService=n,this.userService=a,this.router=l,this.route=h,this.dialog=p,this.fb=_,this.location=S,this.isLoading=!0,this.isPreview=!1,this.isEditing=!1,this.fromProgram=!1,this.startTimer=!1,this.route.queryParams.subscribe(v=>{this.newWorkout=v.newWorkout,this.isEditing=v.isEditing,this.workoutId=v.workoutId,this.fromProgram=v.fromProgram,this.finishedProgram=v.finishedProgram,this.creatingProgram=v.creatingProgram,this.programId=v.programId,this.workoutDays=v.workoutDays,this.workoutWeeks=v.workoutWeeks,this.deload=v.deload,this.generatedPreviewWorkout=v.generatedPreviewWorkout,this.week=v.week,this.day=v.day,this.isPreview=v.isPreview})}ngOnInit(){this.exerciseService.getExercises(),this.userService.currentUser.subscribe(e=>{e?this.userSettings=e:(this.router.navigateByUrl(""),localStorage.clear())}),this.finishedProgram||(console.log("Getting exercises",this.finishedProgram),this.exerciseService.getExercises()),this.date=new Date,this.initForm()}ngOnDestroy(){clearInterval(this.timerInterval)}initForm(){this.workoutForm=this.fb.group({name:[""],description:[""],routineId:[""],userId:[""],rules:[""],baseWorkout:!1,deload:!1,meso:0,date:[""],week:1,block:0,createdby:"",isPublic:!1,type:"",day:0,completed:!1,superSet:"",totalWeight:[""],totalTime:[""],bodyWeight:[""],totalReps:[""],totalSets:[""],segments:this.fb.array([])}),this.fromProgram&&!this.isEditing&&(0==this.workoutDays.length?this.workoutForm.get("day").patchValue(1):this.workoutForm.get("day").patchValue(this.workoutDays[0]),this.isLoading=!1),this.newWorkout&&(this.isLoading=!1),this.isEditing&&this.workoutService.getWorkout(this.workoutId).subscribe(e=>{this.workout=e,this.workout.segments.sort((i,n)=>i.name-n.name),this.workout.segments.forEach(function(i){i.sets.sort((n,a)=>n.name-a.name)}),this.setValueForm()},e=>console.log(e,"This did not load properlu make a toasty")),this.generatedPreviewWorkout&&(this.workout=this.routineService.getGeneratedProgramWorkout(this.workoutId,this.week,this.day),this.setValueForm()),this.isPreview&&(console.log(this.workoutId),this.workoutService.getWorkout(this.workoutId).subscribe(e=>{this.workout=e,console.log(e),this.workout.segments.sort((i,n)=>i.name-n.name),this.workout.segments.forEach(function(i){i.sets.sort((n,a)=>n.name-a.name)}),this.setValueForm()},e=>{}))}setValueForm(){let e=this.workout.segments;const i=new w.Oe([]);e.forEach(n=>{i.push(this.fb.group({id:n.id,name:n.name,notes:n.notes,exerciseId:n.exerciseId,exerciseName:n.exerciseName,timer:n.timer,superSet:n.superSet,sets:this.setSets(n)}))}),this.workoutForm.setControl("segments",i),this.workoutForm.patchValue(this.workout),this.isLoading=!1}setSets(e){const i=new w.Oe([]);return e.sets.forEach(n=>{i.push(this.fb.group({id:n.id,name:n.name,reps:n.reps,weight:n.weight,previousWeight:n.previousWeight,previousReps:n.prepreviousReps,success:n.success,rm:n.rm,rpe:n.rpe,type:n.type,showPrev:n.showPrev,setRules:n.setRules}))}),i}preChecks(){if(console.log("Prechecks",this.creatingProgram),this.workoutForm.get("name").value||0!=this.dialog.openDialogs.length||this.dialog.open(me,{data:{},disableClose:!0,hasBackdrop:!0}),this.creatingProgram)this.onFinish();else{let i=!1;this.workoutForm.get("segments").value.forEach(a=>{a.sets.forEach(l=>{1==l.success&&(this.onFinish(),i=!0,console.log("onFinish(), from noSetSuccess"))})}),0==i&&(console.log("Ask if set all to true"),0==this.dialog.openDialogs.length&&this.dialog.open(he,{data:{},disableClose:!0,hasBackdrop:!0}).afterClosed().subscribe(l=>{l&&(this.setAllExerciseSetSuccess(),this.onFinish()),l||this.onFinish()}))}}onFinish(){clearInterval(this.timerInterval),this.fromProgram&&(this.workoutForm.get("block").patchValue(1),this.workoutForm.get("baseWorkout").patchValue(!0),this.workoutForm.get("routineId").patchValue(this.programId)),this.workoutForm.get("date").patchValue(this.date),this.workoutForm.get("userId").patchValue(this.userSettings.id);let h,p,_,S,e=this.workoutForm.value,i=0,n=0,a=0,v=[];e.rules&&(p=JSON.parse(this.workout.rules),_=p.topSet.find(k=>"Top Set"==k.name),S=p.topSet.find(k=>"Back Off Set"==k.name)),this.fromProgram&&(e.day=parseInt(e.day),e.week=parseInt(e.week),e.routineId=+this.programId),this.deload&&(e.type="Deload"),e.segments.forEach((k,I)=>{k.name=k.name.toString(),k.exerciseId=parseInt(k.exerciseId),k.sets.forEach((x,y)=>{if(x.name=x.name.toString(),x.rm=+x.rm,x.rpe=+x.rpe,x.success&&(n+=1,a+=parseInt(x.reps),h=x.weight*x.reps,isNaN(h)?console.log("nan"):i+=h),x.reps=x.reps.toString(),x.weight=x.weight.toString(),x.previousReps||(x.previousReps=x.reps.toString()),x.previousWeight||(x.previousWeight=x.weight.toString()),x.setRules)v.push(JSON.parse(x.setRules));else{if("Top Set"==x.type){let T={exerciseName:"",segmentIndex:"",setIndex:"",type:"",currentWeight:"",increaseWeight:0};parseFloat(x.reps)>parseFloat(_.repRanges.finish)?(T.exerciseName=k.exerciseName,T.segmentIndex=I,T.setIndex=y,T.type="Top Set",T.currentWeight=x.weight,v.push(T)):console.log("Keep Weight",k.exerciseName)}if("Back Off Set"==x.type){let T={exerciseName:"",segmentIndex:"",setIndex:"",type:"",currentWeight:"",increaseWeight:0};parseFloat(x.reps)>parseFloat(S.repRanges.finish)?(T.exerciseName=k.exerciseName,T.segmentIndex=I,T.setIndex=y,T.type="Back Off Set",T.currentWeight=x.weight,v.push(T)):console.log("Keep Weight",k.exerciseName)}}})}),e.superSet=this.superSetNo,e.totalReps=a.toString(),e.totalSets=n.toString(),e.bodyWeight=(0).toString(),e.totalWeight=i.toString(),e.totalTime="0m 10s",e.date=this.topSetModal(v,e,p)}topSetModal(e,i,n){e.length>0?this.dialog.open(_e,{data:{}}).afterClosed().subscribe(l=>{}):this.saveWorkout(i)}saveWorkout(e){this.isEditing&&0==this.dialog.openDialogs.length&&this.dialog.open(Et,{data:{title:"Update"},disableClose:!0,hasBackdrop:!0}).afterClosed().subscribe(n=>{n&&(this.isLoading=!0,this.finishedProgram&&(e.completed=!0),this.workoutService.onUpdate(e,this.workoutId).subscribe(a=>{this.finishedProgram&&(this.workoutService.updateUserSettingsProgressBar(this.userSettings.completedWorkouts+1,this.userSettings.totalWorkouts,this.userSettings.id),this.routineService.getProgramNoSetsSegments(this.userSettings.routineId),this.location.back()),this.fromProgram&&(this.routineService.getProgram(this.programId,!1),this.location.back())},a=>{console.log(a)}))}),this.isEditing||0==this.dialog.openDialogs.length&&this.dialog.open(Et,{data:{title:"New"},disableClose:!0,hasBackdrop:!0}).afterClosed().subscribe(n=>{n&&(console.log(n),this.fromProgram?(console.log("Program Workout"),e.completed=!1,this.routineService.saveProgramWorkout(e,this.programId),this.location.back()):(e.completed=!0,delete e.routineId,this.workoutService.onCreate(e).subscribe(a=>{this.location.back()},a=>{}))),n||console.log(n)})}workoutOptions(){0==this.dialog.openDialogs.length&&this.dialog.open(fe,{data:{},disableClose:!0,hasBackdrop:!0}).afterClosed().subscribe(i=>{if("reorder"==i&&0==this.dialog.openDialogs.length){let n=this.workoutForm.get("segments").value;this.dialog.open(ve,{data:{exercises:n},disableClose:!0,hasBackdrop:!0}).afterClosed().subscribe(l=>{l.data&&this.workoutForm.get("segments").patchValue(l.data)})}"complete"==i&&this.setAllExerciseSetSuccess()})}setAllExerciseSetSuccess(){let e=this.workoutForm.get("segments").value;e.forEach(i=>{i.sets.forEach(n=>{n.success=!0})}),this.workoutForm.get("segments").patchValue(e)}addExercise(e){0==this.dialog.openDialogs.length&&this.dialog.open(Tt,{height:"900px",width:"600px",data:{}}).afterClosed().subscribe(n=>{1==n.action.length?(this.exerciseCheck(n.action,e),console.log(n.action)):this.superSetExercises(n.action)})}exerciseCheck(e,i){e&&(i?this.workoutForm.controls.segments.insert(i,this.fb.group({name:"",exerciseId:e[0].id,exerciseName:e[0].name,notes:"",timer:"",superSet:0,sets:this.fb.array([this.fb.group({name:[""],reps:[""],previousReps:[""],previousWeight:[""],weight:[""],success:[!1],rm:[""],rpe:[""],type:[""],showPrev:[!1],setRules:[""]})])})):this.workoutForm.controls.segments.push(this.fb.group({name:[],exerciseId:e[0].id,exerciseName:e[0].name,notes:"",timer:"",superSet:0,sets:this.fb.array([this.fb.group({name:[""],reps:[""],previousReps:[""],previousWeight:[""],weight:[""],success:[!1],rm:[""],rpe:[""],type:[""],showPrev:[!1],setRules:[""]})])})))}superSetExercises(e){var i=[];e.forEach(n=>{i.push(" "+n.name)}),e.forEach(n=>{this.workoutForm.controls.segments.push(this.fb.group({name:[""],exerciseId:n.id,exerciseName:n.name,notes:["Superset with"+i.toString()],timer:"",superSet:this.superSetNo,sets:this.fb.array([this.fb.group({name:[""],reps:[""],previousReps:[""],previousWeight:[""],weight:[""],success:[!1],rm:[""],rpe:[""],type:[""],showPrev:[!1],setRules:[""]})])}))}),this.superSetNo++}exerciseOptions(e){}exerciseOptionsCheck(e,i){1==e&&(console.log(i),this.addExercise(i)),2==e&&(console.log(i),this.addExercise(i+1))}changeExercise(e){this.dialog.open(Tt,{data:{}}).afterClosed().subscribe(n=>{this.updateExerciseChange(n.action,e),console.log("From modal",n)})}updateExerciseChange(e,i){console.log(e);let n=0;e[0].id&&(n=e[0].id),this.workoutForm.controls.segments.at(i).get("exerciseName").patchValue(e[0].name),this.workoutForm.controls.segments.at(i).get("exerciseId").patchValue(n)}deleteSegment(e){this.workoutForm.controls.segments.removeAt(e)}addNewSet(e){e.push(this.fb.group({name:[""],reps:["",w.kI.required],weight:["",w.kI.required],previousReps:[""],previousWeight:[""],success:!1,rm:[""],rpe:[""],type:[""],showPrev:!1,setRules:[""]}))}deleteSet(e,i){e.removeAt(i)}addType(e,i){0==this.dialog.openDialogs.length&&this.dialog.open(ge,{data:{}}).afterClosed().subscribe(a=>{this.updateType(a.placeholder,a.type,e,i)})}updateType(e,i,n,a){this.workoutForm.get("segments").at(n).get("sets").at(a).get("type").patchValue(i)}addTimer(e){}setOptions(e,i){this.dialog.open(ue,{}).afterClosed().subscribe(a=>{console.log("Action",a.action),"1"===a.action&&this.workoutForm.get("segments").at(e).get("sets").at(i).get("reps").patchValue("AMRAP"),"5"===a.action&&this.workoutForm.get("segments").at(e).get("sets").at(i).get("reps").patchValue("Failure"),"3"===a.action&&this.workoutForm.controls.segments.at(e).get("sets").insert(i,this.fb.group({name:[""],reps:[""],weight:[""],success:[!1],rm:[""],rpe:[""],type:[""]})),"4"===a.action&&this.workoutForm.controls.segments.at(e).get("sets").insert(i+1,this.fb.group({name:[""],reps:[""],weight:[""],success:[!1],rm:[""],rpe:[""],type:[""]})),"2"===a.action&&this.workoutForm.get("segments").at(e).get("sets").at(i).get("weight").patchValue("Bodyweight")})}}return(r=s).\u0275fac=function(e){return new(e||r)(t.Y36(Ct.z),t.Y36(Se),t.Y36(we.p),t.Y36(Ot.K),t.Y36(q.F0),t.Y36(q.gz),t.Y36(P.uw),t.Y36(w.qu),t.Y36(E.Ye))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-new-workout"]],decls:30,vars:6,consts:[["id","html2Pdf",1,"container"],[1,"row"],[1,"col-sm-12"],[3,"formGroup"],[1,"col-sm-6"],["class","btn btn-success","type","submit",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"row","mt-3"],["type","text","placeholder","Workout Name","formControlName","name",1,"form-control"],["class","col-sm-6",4,"ngIf"],["rows","3","type","text","placeholder","Notes:","formControlName","description",1,"form-control"],[4,"ngIf"],["formArrayName","segments"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"button",3,"click"],["type","submit",1,"btn","btn-success",3,"click"],["type","number","placeholder","Week","formControlName","week",1,"form-control"],["type","number","placeholder","Day","formControlName","day",1,"form-control"],[3,"formGroupName"],["type","hidden","formControlName","exerciseName"],["element",""],["type","hidden","formControlName","exerciseId"],["type","hidden","formControlName","superSet"],["superSetElement",""],["type","hidden","formControlName","name",2,"display","none",3,"ngModel"],["class","col-sm-6",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"col-sm-2"],[1,"far","fa-trash-alt",3,"click"],[1,"fas","fa-exchange-alt",3,"click"],[1,"fas","fa-cog",3,"click"],["rows","1","type","text","placeholder","Notes:","formControlName","notes",1,"form-control"],["class","row mt-3",4,"ngIf"],[1,"col-sm-1"],["for",""],["formArrayName","sets"],["for","",1,"h4"],[1,"h4"],[1,"col-sm-4"],[3,"click"],["type","text","formControlName","name",2,"display","none",3,"ngModel"],["class","col-sm-2",4,"ngIf","ngIfElse"],["repsElseBlock",""],["weightElseBlock",""],["type","text","formControlName","type",2,"display","none"],["type",""],[3,"click",4,"ngIf"],["class","col-sm-2",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","success",1,"form-check-input"],[1,"fas","fa-ellipsis-v",3,"click"],[1,"fas","fa-times",3,"click"],["class","row",4,"ngIf"],["type","text","placeholder","reps","formControlName","reps",1,"form-control"],["type","number","placeholder","reps","formControlName","reps",1,"form-control"],["type","text","placeholder","kgs","formControlName","weight",1,"form-control"],["type","number","placeholder","weight","formControlName","weight",1,"form-control"],["type","number","placeholder","1RM%","formControlName","rm",1,"form-control"],["type","number","placeholder","RPE","formControlName","rpe",1,"form-control"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4),t.YNc(6,be,2,0,"button",5),t.YNc(7,Pe,2,0,"button",5),t.qZA()(),t.TgZ(8,"div",1)(9,"div",4)(10,"button",6),t.NdJ("click",function(){return i.workoutOptions()}),t._uU(11,"Workout Options"),t.qZA()()(),t.TgZ(12,"div",7)(13,"div",2),t._UZ(14,"input",8),t.qZA()(),t.TgZ(15,"div",7)(16,"div",4)(17,"button"),t._uU(18,"Start Timer"),t.qZA()(),t.YNc(19,ke,1,0,"div",9),t.qZA(),t.TgZ(20,"div",7)(21,"div",4),t._UZ(22,"textarea",10),t.qZA()(),t.YNc(23,ye,9,0,"div",11),t.TgZ(24,"div",12),t.YNc(25,Ue,47,7,"div",13),t.qZA(),t.TgZ(26,"div",7)(27,"div",2)(28,"button",14),t.NdJ("click",function(){return i.addExercise(null)}),t._uU(29,"Add Exercise"),t.qZA()()()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.workoutForm),t.xp6(3),t.Q6J("ngIf",!i.isEditing),t.xp6(1),t.Q6J("ngIf",i.isEditing),t.xp6(12),t.Q6J("ngIf",!i.generatedPreviewWorkout),t.xp6(4),t.Q6J("ngIf",i.fromProgram),t.xp6(2),t.Q6J("ngForOf",i.workoutForm.get("segments").controls))},dependencies:[E.sg,E.O5,w._Y,w.Fj,w.wV,w.Wl,w.JJ,w.JL,w.sg,w.u,w.x0,w.CE],encapsulation:2}),s})();var He=g(5665);let Ge=(()=>{var r;class s{}return(r=s).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[{provide:P.Bq,useValue:{hasBackdrop:!0}}],imports:[E.ez,w.u5,w.UX,P.Is,He.ie,q.Bz,q.Bz.forChild([{path:"new-workout",component:Be}])]}),s})()}}]);